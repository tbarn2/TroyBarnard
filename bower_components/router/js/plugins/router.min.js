define(function(){function Router(){this.routes=this._parseRouteAttr();this.args=[];this.modules=[];if(!this.routes){return false}var rLength=this.routes.length,i=0;for(;i<rLength;i++){this._parseRoute(this.routes[i])}}Router.prototype.getMods=function(){return this.modules};Router.prototype.getArgs=function(){return this.args};Router.prototype._parseRoute=function(route){var routeParts=route.split("?"),params={},j=0;this.modules.push(routeParts[0]);if(routeParts.length>1){this._parseArgs(routeParts)}};Router.prototype._parseArgs=function(route){var params={},j=0;route=route[1].split(",");for(;j<route.length;j++){var d=route[j].split(":");params[d[0]]=d[1]}this.args[route[0]]=params};Router.prototype._parseRouteAttr=function(){var routes=document.body.getAttribute("data-route");return routes?routes.split(" "):false};return{load:function(name,req,load,config){var router=new Router,modules,args;if(name){args=router.getArgs();load(args[name]?args[name]:false);return}modules=router.getMods();if(!modules){load();return false}req(modules,function(){load(arguments)})}}});